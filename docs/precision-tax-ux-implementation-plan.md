# 정밀 세금 계산/UX 구현계획서 (사업소득 중심 + N잡 포함)

> 목적: **종합소득세(종소세)를 “최대한 정확하게”** 계산하고, 복잡성은 **극도로 편리한 UX**와 **쉬운 용어 설명**으로 숨긴다.  
> 출력은 **총세금(결정세액)**과 **추가 납부/환급(기납부 반영)**을 함께 제공한다.

---

## 0. 핵심 원칙 (이 문서의 1줄 요약)

1) **정확도 우선**: “대충 예측”이 아니라 “신고서에 가까운 결과”를 목표로 한다.  
2) **복잡성 희소화**: 입력은 적게 느껴지게(선택 분기/자동합산/기본값/가이드).  
3) **설명은 즉시**: 모든 용어는 `?` 한 번으로 10초 안에 이해 가능해야 한다.  
4) **프라이버시 기본값**: 사용자의 민감 정보는 기기 밖으로 나가지 않는 것을 기본으로 한다(서버/회원가입 없는 방향 유지).

---

## 1. 목표/비목표

### 목표(Goal)
- 종소세를 **소득 합산 + 공제/세액공제 + 기납부**까지 반영해 “결정세액/추가납부”를 산출
- 사업소득이 주력인 사용자(음식점/카페 등)에게 **입력 스트레스가 낮은 정밀 계산 UX** 제공
- N잡(근로/연금/금융/기타소득)은 “있으면 추가 입력”으로 **정밀 합산** 지원
- 모든 입력 항목에 **용어 설명 + 어디서 찾기**(문서/화면 기준) 제공

### 비목표(Non-goal, 1차 범위 제외 권장)
- 세무대리/신고 대행 기능(전자신고 제출)
- 자동 수집(은행/카드/홈택스 계정 연동) 같은 외부 계정 연동
- 법적 책임을 지는 “세무 자문” 표현(앱 내 문구는 안내/계산 도구로 제한)

---

## 2. “정밀 종소세” 출력 정의

### 2.1 메인 결과(상단 3요소)
1) **총세금(결정세액)**  
   - = 종합소득세 + 지방소득세(종합소득세의 10%)
2) **기납부세액(이미 낸 세금)**  
   - = 원천징수(근로/연금/금융/기타) + 중간예납 + 기타 기납부(있으면)
3) **추가 납부/환급**  
   - = 총세금 − 기납부세액  
   - +면 “추가 납부”, −면 “환급”

### 2.2 보조 결과(신뢰/설명)
- **정밀도(완성도) 점수 0~100**: 입력 누락이 있을수록 낮아짐
- **추정 사용 배지**: `모르겠어요`로 추정치를 사용한 항목 표시
- **계산 근거 보기**: 총소득 → 공제 → 과세표준 → 산출세액 → 세액공제 → 결정세액 → 기납부 → 추가/환급

---

## 3. 정보 구조(IA) & 진입점

### 3.1 메인 탭 유지
- 레이더(대시보드)
- 자료함(입력/관리)
- 설정

### 3.2 정밀 종소세 진입점(2개)
- 레이더의 “종소세 카드” → `정밀 계산` CTA
- 자료함에 “정밀 종소세(신고급)” 섹션 추가 → `시작/이어하기`

---

## 4. UX 흐름(정밀 종소세) — Stepper 기반 “마법사”

### 공통 UX 규칙
- 상단에 **Stepper(단계 표시)**: `소득` → `공제` → `기납부` → `결과`
- 각 단계는 “필수 입력만으로도 다음으로” 진행 가능하되:
  - 누락 시 **정밀도 점수 하락** + 결과 화면에서 “정확히 하려면 더 입력” 안내
- 모든 입력은 **자동 저장**(뒤로 가도 유지)
- 각 입력칸에:
  - `?` (용어 설명: 2줄 + 더보기)
  - `어디서 찾기` (문서/화면 기준 안내)
  - `모르겠어요` (대체 입력/추정 사용)

---

### 4.1 Step 0 (시작) — “귀속연도 선택 + 소득 구성”
**목적**: 어떤 해의 세금을 계산하는지, 어떤 소득이 있는지 결정.

**UI 구성**
- 카드: `귀속연도 선택`
  - 기본 추천: “작년(신고용)” / “올해(예상)”
  - 보조 텍스트: “종소세는 보통 다음 해 5월에 신고/납부해요”
- 카드: `소득이 있나요? (해당되는 것만 체크)`
  - 사업소득(기본 ON, 필수)
  - 근로소득(선택)
  - 연금소득(선택)
  - 금융소득(이자/배당)(선택)
  - 기타소득(선택)
- CTA: `다음`

**입력 최소화(중요)**
- 체크를 켠 소득만 이후 단계에서 나타남(복잡성 희소화의 핵심)

---

### 4.2 Step 1 (소득) — “사업소득은 정밀, 나머지는 2칸”

#### 4.2.1 사업소득(필수)
**목표**: 사업소득의 정확도가 전체 종소세 정확도의 대부분을 결정.

**UI 구성(권장: 탭 또는 세그먼트)**
- `빠른 입력(연간)` / `상세 입력(월별)` 두 가지 중 선택

**A) 빠른 입력(연간)**
- 입력칸 1: `연간 매출`
  - 보조 선택: `부가세 포함/미포함/모르겠음`
  - UX: 포함/미포함에 따라 “자동으로 VAT 제외 매출(공급가액)” 표시(읽기 전용)
- 입력칸 2: `연간 필요경비(전체)`
  - 보조: “부가세 여부 상관없이 ‘전체 경비’”
- 토글: `장부(기장) 신고인가요?`
  - ON: 위 2칸(매출/경비)로 정밀 계산(권장)
  - OFF: 단순경비율 적용(간편), 단 **“정밀 모드에서는 권장하지 않음”** 안내

**B) 상세 입력(월별)**
- 월 선택 + 월 매출 + 월 경비(전체) 입력
- 자동 합산으로 연간 값 표시
- “누락 월”이 있으면:
  - (선택) `연간 추정으로 채우기` 토글(예상 계산)
  - 누락 표시(점/배지) + 정밀도 하락 안내

**추가 편의(추천)**
- `전월 복사` / `지난해 값 가져오기` / `비슷한 가게 평균 참고`(참고값은 “추정” 표시)

#### 4.2.2 근로/연금/금융/기타소득(선택, 동일 패턴)
**목표**: “정밀 합산”을 하되 입력 부담은 일정하게 유지.

**공통 UI 카드 템플릿(소득 1개당)**
- 입력칸 1: `소득금액(추천)`
- 입력칸 2: `원천징수세액(이미 낸 세금)`
- 보조 버튼: `소득금액이 뭔지 모르겠어요`
  - 대체 입력: `지급액(총액)` + `원천징수세액`
  - 안내: “지급액 기반은 정확도가 떨어질 수 있어요” + 추정 배지 부여

**금융소득(이자/배당) 특이점(UX만 정의)**
- 질문 1개만 추가: `올해 이자+배당이 2,000만원 넘나요?`
  - 모르면 `모르겠어요` → “일단 합산 입력(추정)” + 경고 배지

---

### 4.3 Step 2 (공제) — “기본은 자동, 추가는 접기/펼치기”

#### 4.3.1 기본 공제(항상 노출, 입력 부담 낮게)
- `인적공제(가족)`:
  - 체크리스트: 본인(고정), 배우자, 자녀(명수), 부모(명수)
  - 안내: “가족 수가 늘면 공제가 늘 수 있어요”
- `노란우산`:
  - 미가입/가입 토글
  - 가입 시: 월 납입액 또는 연 납입액 중 택1(둘 다 제공)

#### 4.3.2 추가 공제/세액공제(선택, 기본 접힘)
- “더 정확하게(선택)” 버튼을 누르면 섹션 확장
- 항목은 `있나요?` 방식으로만 시작 → “예”인 항목만 숫자 입력 노출
- 권장 후보(우선순위 순):
  1) 연금계좌(연금저축/IRP) 납입액(세액공제 영향 큼)
  2) 의료비/교육비/기부금(조건 복잡 → ‘있는 사람만’)
  3) 자녀 관련 세액공제(가족 입력과 연동)

**UX 원칙**
- 모든 항목에 `대상/조건`을 긴 글로 쓰지 말고:
  - “대부분 해당/해당 없음/모름” 3칩
  - 모름이면 “보수적으로 0 처리 + 정밀도 하락” 안내

---

### 4.4 Step 3 (기납부) — “추가 납부/환급의 핵심”

**목적**: 기납부를 넣어야 “추가 납부/환급”이 정확해짐.

**UI 구성**
- 상단 안내 카드: “추가/환급은 ‘이미 낸 세금’을 알아야 정확해요”
- 리스트(카드)로 항목 분리:
  - 근로 원천징수
  - 연금 원천징수
  - 금융 원천징수
  - 기타 원천징수
  - 종소세 중간예납
  - 기타 기납부(직접 입력)
- 각 카드에는:
  - 금액 입력칸(원)
  - `어디서 찾기` 버튼
  - `0원` 빠른 선택
- 하단에 자동 합계: `기납부세액 합계`
- CTA: `결과 보기`

---

### 4.5 Step 4 (결과) — “한 화면에서 끝, 상세는 접어서”

**UI 구성(상단부터)**
1) **결과 요약 카드(가장 큼)**
   - 총세금(결정세액)
   - 기납부세액(합계)
   - 추가 납부/환급(컬러 강조: 납부=경고/환급=성공)
2) **정밀도 카드**
   - 0~100 점수 + “정확히 하려면” 1~3개의 액션 제안(바로가기)
3) **구성요소(접힘 기본)**
   - 종합소득(합계)
   - 공제(합계)
   - 과세표준
   - 산출세액
   - 세액공제
   - 결정세액(종소세)
   - 지방소득세
4) **설명/가이드**
   - “이 결과가 나온 이유 3줄 요약”
   - `용어 사전 열기` / `계산 근거 더 보기`

---

## 5. UI 컴포넌트 명세(구현 가이드)

### 5.1 입력 카드(표준)
- 제목(용어) + `?` + `어디서 찾기`
- 숫자 입력(원 단위): 천 단위 콤마 자동
- 보조 액션:
  - `모르겠어요` → 대체 입력/추정 사용 안내
  - `0원` → 빠른 입력
- 상태 배지:
  - `완료` / `미입력` / `추정`

### 5.2 “어디서 찾기” 바텀시트(표준)
- 상단: 용어 제목 + 2줄 초간단 설명(= 용어 사전 데이터 재사용)
- 본문: 3~5줄 “찾는 순서”
- 하단: `알겠어요` + (선택) `예시 보기`

### 5.3 용어 사전(독립 화면)
- 검색창 + 카테고리(소득/공제/세액/납부)
- 즐겨찾기(별) + 최근 본 용어
- 각 항목: 제목(≤12자) + 2줄 설명 + `어디서 찾기`
- 데이터 원본: `docs/glossary-ui-copy.md`를 기준으로 운영(카피 변경이 쉬워야 함)

---

## 6. “복잡성 희소화” UX 장치(필수)

1) **조건부 노출**: “있나요?”에 Yes인 항목만 입력칸을 보여주기  
2) **추천 경로**: “정밀(추천)”을 기본으로 두고, 간편은 보조로 숨기기  
3) **대체 입력**: 모르면 “지급액/합계” 같은 대체 입력 제공(단, 추정 배지)  
4) **자동합산**: 월별/카테고리별 입력이 있으면 연간 합계 자동 채움  
5) **정밀도 피드백**: 입력 누락이 결과에 미치는 영향을 “다음 액션”으로 제시  

---

## 7. 품질/검증(UX 관점) — 사용자가 스스로 실수 줄이게

### 7.1 입력 검증(즉시 피드백)
- 매출/경비가 비정상적으로 큰 경우 경고(“오타일 수 있어요”)
- 기납부가 총세금보다 큰 경우 안내(“환급일 수 있어요”)
- VAT 포함/미포함이 결과에 큰 영향을 주는 입력은 “확인” 팝업 제공

### 7.2 “추정” 사용 시 안전장치
- 추정치 사용 시 결과 화면에 `추정 포함` 배지 표시
- 추정 항목이 많을수록 정밀도 점수 하락 + “정확히 하려면” 바로가기 제공

---

## 8. 릴리즈 플랜(권장 단계)

### R1 (정밀 계산 MVP)
- Stepper 기반 정밀 종소세 플로우
- 사업소득(연간 2칸) + 인적공제 + 노란우산
- N잡 소득(각 2칸: 소득금액/원천징수)
- 기납부 합산 + 추가/환급
- 결과 화면 + 상세 내역(접힘)
- 용어 설명(2줄) + 어디서 찾기(요약)

### R2 (정확도 강화 + UX 고도화)
- 월별 상세 입력/자동합산/누락 월 추정 토글
- 추가 공제/세액공제(연금계좌/의료비/교육비/기부금 등) “있나요?” 방식 확장
- 정밀도 점수 체계 고도화(누락 항목별 영향 안내)

### R3 (입력 편의 최종)
- 문서 기반 입력 가이드(예시/하이라이트)
- 온디바이스 OCR(선택): 원천징수영수증/고지서 사진에서 숫자 추출(프라이버시 유지)

---

## 9. 완료 기준(수용 기준: QA 체크리스트)

- 총세금/기납부/추가·환급이 한 화면에서 명확히 구분돼 표시된다
- 소득 구성 체크에 따라 입력 화면이 자동으로 단순해진다(없는 소득은 노출 X)
- 모든 입력칸에 `?` 설명과 `어디서 찾기`가 제공된다
- `모르겠어요`를 눌러도 흐름이 막히지 않고, 결과에 “추정”이 표시된다
- 기납부 입력이 0이면 “추가/환급은 참고용” 안내가 뜬다
- 오타/이상치에 대한 경고가 사용자에게 이해 가능한 문장으로 제공된다

---

## 10. (추가) 정밀 부가세 UX/정확도 고도화 — 종소세와 동일 원칙 적용

> 본 문서의 핵심은 “정밀 종소세”지만, 앱의 신뢰를 위해 부가세도 같은 철학(정확도 우선 + 복잡성 희소화 + 즉시 설명)을 적용한다.

### 10.1 부가세 결과 정의(반기)
- **납부세액(또는 환급 가능)**을 명확히 구분 표기
- 구성요소를 항상 함께 표기:
  - 매출세액(판매에서 생긴 세금)
  - 매입세액(지출 중 부가세 붙는 매입에서 돌려받는 세금)
  - 의제매입세액공제(면세 식재료 등)
  - 신용카드 등 발행세액공제

### 10.2 부가세 입력 UX(필수 최소)
- 매출: 반기 기준(월별 또는 합계)
  - 카드/현금영수증/기타현금은 “자동 분해 + 수정 가능” 패턴 유지
- 지출: “부가세 붙는 지출 비율”을 질문형으로 받기(대부분/반반/거의없음)
- 의제매입: 면세 식재료 매입(월별 프리셋 + 직접 입력)

### 10.3 부분 입력(월 누락) 처리
- “지금까지 입력만 보여주기” vs “반기 전체 추정” 토글 제공
- 추정 사용 시 `추정 포함` 배지 + 정확도/완성도 하락

### 10.4 과세유형(일반/간이/모름) UX
- 온보딩/설정에서 과세유형을 받고, 모르면:
  - “사업자등록증에서 찾기” 가이드 제공
  - 결과 화면에 “과세유형에 따라 결과가 달라질 수 있어요” 고지

### 10.5 “부가세 vs 종소세” 쉬운 설명(레이더/상세 공통)
- 한 문장 요약:
  - 부가세: **판매에서 받은 세금 − 지출에서 낸 세금(공제 포함)** → 반기/분기 단위
  - 종소세: **1년 동안 남긴 이익(여러 소득 합산) 기준** → 연 1회
- 사용자가 헷갈리는 포인트를 즉시 설명:
  - “부가세가 크다고 종소세도 큰 건 아님”(마진/경비/공제에 따라 크게 달라짐)
